<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Navegação</title>
    <style>
        .hidden { display: none !important; }
        .active { background-color: blue; color: white; }
        nav { padding: 20px; background: #f0f0f0; }
        button { margin: 5px; padding: 10px; }
        .view { display: none; padding: 20px; margin: 20px; border: 2px solid #ccc; }
        .view.active { display: block; }
    </style>
</head>
<body>
    <h1>Teste de Navegação</h1>

    <nav id="mainNav">
        <button class="nav-btn active" data-view="dashboard">Dashboard</button>
        <button class="nav-btn hidden" data-view="nova-requisicao" id="novaTarefaBtn">Nova Requisição</button>
        <button class="nav-btn hidden" data-view="metricas" id="metricasBtn">Métricas</button>
    </nav>

    <div id="dashboard" class="view active">
        <h2>Dashboard</h2>
        <p>Conteúdo do dashboard</p>
    </div>

    <div id="nova-requisicao" class="view">
        <h2>Nova Requisição</h2>
        <p>Formulário de nova requisição</p>
    </div>

    <div id="metricas" class="view">
        <h2>Métricas</h2>
        <p>Conteúdo de métricas</p>
    </div>

    <div id="log" style="margin: 20px; padding: 10px; background: #eee; font-family: monospace; white-space: pre-wrap;"></div>

    <script>
        const log = document.getElementById('log');
        function addLog(msg) {
            log.textContent += msg + '\n';
            console.log(msg);
        }

        // Simular login como atendente
        function simularLogin() {
            const novaTarefaBtn = document.getElementById('novaTarefaBtn');
            const metricasBtn = document.getElementById('metricasBtn');

            addLog('=== SIMULANDO LOGIN COMO ATENDENTE ===');
            addLog('Botão Nova Tarefa antes: ' + novaTarefaBtn.className);

            novaTarefaBtn.classList.remove('hidden');
            metricasBtn.classList.add('hidden');

            addLog('Botão Nova Tarefa depois: ' + novaTarefaBtn.className);
            addLog('Botão visível? ' + (novaTarefaBtn.offsetWidth > 0));
        }

        // Navegação
        const nav = document.getElementById('mainNav');
        nav.addEventListener('click', (e) => {
            const target = e.target;
            if (target.classList.contains('nav-btn')) {
                e.preventDefault();
                const view = target.getAttribute('data-view');
                addLog('Botão clicado: ' + target.textContent + ' | view: ' + view);

                if (view) {
                    switchView(view);
                }
            }
        });

        function switchView(viewName) {
            addLog('Mudando para view: ' + viewName);

            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));

            const viewElement = document.getElementById(viewName);
            const navButton = document.querySelector(`[data-view="${viewName}"]`);

            if (viewElement) {
                viewElement.classList.add('active');
                addLog('View ativada: ' + viewName);
            } else {
                addLog('ERRO: View não encontrada: ' + viewName);
            }

            if (navButton) {
                navButton.classList.add('active');
            }
        }

        // Simular login automaticamente
        setTimeout(simularLogin, 1000);
    </script>
</body>
</html>
